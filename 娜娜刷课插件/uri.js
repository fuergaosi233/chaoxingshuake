(function(){var n="(museum|travel|aero|arpa|coop|info|jobs|name|nvus|biz|com|edu|gov|int|mil|net|org|pro|xxx|ac|ad|ae|af|ag|ai|ak|al|al|am|an|ao|aq|ar|ar|as|at|au|aw|ax|az|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|co|cr|cs|ct|cu|cv|cx|cy|cz|dc|de|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fl|fm|fo|fr|ga|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gu|gw|gy|hi|hk|hm|hn|hr|ht|hu|ia|id|id|ie|il|il|im|in|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|ks|kw|ky|ky|kz|la|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|ma|mc|md|md|me|mg|mh|mi|mk|ml|mm|mn|mn|mo|mo|mp|mq|mr|ms|ms|mt|mt|mu|mv|mw|mx|my|mz|na|nc|nc|nd|ne|ne|nf|ng|nh|ni|nj|nl|nm|no|np|nr|nu|ny|nz|oh|ok|om|or|pa|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|pr|ps|pt|pw|py|qa|re|ri|ro|ru|rw|sa|sb|sc|sc|sd|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|tn|to|tp|tr|tt|tv|tw|tx|tz|ua|ug|uk|um|us|ut|uy|uz|va|va|vc|ve|vg|vi|vi|vn|vt|vu|wa|wf|wi|ws|wv|wy|ye|yt|yu|za|zm|zw|de.net|gb.net|uk.net|dk.org|eu.org|asn.au|com.au|conf.au|csiro.au|edu.au|gov.au|id.au|info.au|net.au|org.au|otc.au|oz.au|telememo.au|ac.cn|ah.cn|bj.cn|com.cn|cq.cn|edu.cn|gd.cn|gov.cn|gs.cn|gx.cn|gz.cn|hb.cn|he.cn|hi.cn|hk.cn|hl.cn|hn.cn|jl.cn|js.cn|ln.cn|mo.cn|net.cn|nm.cn|nx.cn|org.cn|qh.cn|sc.cn|sh.cn|sn.cn|sx.cn|tj.cn|tw.cn|xj.cn|xz.cn|yn.cn|zj.cn|ac.jp|ad.jp|aichi.jp|akita.jp|aomori.jp|chiba.jp|co.jp|ed.jp|ehime.jp|fukui.jp|fukuoka.jp|fukushima.jp|gifu.jp|go.jp|gov.jp|gr.jp|gunma.jp|hiroshima.jp|hokkaido.jp|hyogo.jp|ibaraki.jp|ishikawa.jp|iwate.jp|kagawa.jp|kagoshima.jp|kanagawa.jp|kanazawa.jp|kawasaki.jp|kitakyushu.jp|kobe.jp|kochi.jp|kumamoto.jp|kyoto.jp|lg.jp|matsuyama.jp|mie.jp|miyagi.jp|miyazaki.jp|nagano.jp|nagasaki.jp|nagoya.jp|nara.jp|ne.jp|net.jp|niigata.jp|oita.jp|okayama.jp|okinawa.jp|or.jp|org.jp|osaka.jp|saga.jp|saitama.jp|sapporo.jp|sendai.jp|shiga.jp|shimane.jp|shizuoka.jp|takamatsu.jp|tochigi.jp|tokushima.jp|tokyo.jp|tottori.jp|toyama.jp|utsunomiya.jp|wakayama.jp|yamagata.jp|yamaguchi.jp|yamanashi.jp|yokohama.jp|ac.uk|co.uk|edu.uk|gov.uk|ltd.uk|me.uk|mod.uk|net.uk|nhs.uk|nic.uk|org.uk|plc.uk|police.uk|sch.uk|co.tv)".replace(/\./gi,
"\\.");Registry.require(["cache","helper"],function(){var f=Registry.get("cache"),h=Registry.get("helper");f.create("uris").setOptions({timeout:180,check_interval:120,retimeout_on_get:!0}).init();f.create("regexps").setOptions({timeout:600,check_interval:300,retimeout_on_get:!0}).init();var s=function(){var k=["protocol","hostname","port","origin"],p=["pathname"],q=["search","hash"],r=k.concat(p).concat(q),l,m=function(a,b){var c={},d=document.createElement("a");d.href=a;var e=document.body||document.documentElement||
document;e.appendChild(d);r.forEach(function(a){c[a]=d[a]});e.removeChild(d);if(!b&&c.protocol){if(0!==a.toLowerCase().search(c.protocol)){if(a&&-1==["/","?","#"].indexOf(a[0]))return m("/"+a);l||(l=m("",!0));q.concat(p).forEach(function(a){l[a]===c[a]&&(c[a]="")});k.forEach(function(a){c[a]=""})}-1!=["file:","tampermonkey:"].indexOf(c.protocol)&&(c.pathname=((c.hostname?"/"+c.hostname:"")+(c.pathname||"")).replace(/^\/+/,"/"),c.hostname="")}return c},g={sanitize:function(a,b){var c=!1,d=g.parse(a);
if("tampermonkey:"==d.protocol)-1==d.pathname.search("\\.\\.")?a=rea.extension.getURL(a.replace(/^tampermonkey:\/\//,"")):c=!0;else if(!d.protocol)if(b){var e=g.parse(b);if(!e.protocol||-1!=a.indexOf("..")&&-1!=["file:","tampermonkey:"].indexOf(e.protocol))c=!0;else{var f;"/"===a[0]?f=d.pathname:(e=g.parse(b+("/"===b[b.length-1]?"":"/")+a),f=e.pathname);a=e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")+f+d.search}}else c=!0;return c?null:a},parse:function(a){if(null!==a&&void 0!==a){var b=f.items.uris.get(a);
if(b)return b;b=m(a);f.items.uris.set(a,b);return b}},rel2abs:function(a,b){var c={};r.forEach(function(a){c[a]=b[a]});k.forEach(function(b){c[b]=a[b]});return c},toUrl:function(a,b){return(-1==["about:"].indexOf(a.protocol)?a.protocol+"//":a.protocol)+a.hostname+(a.port&&0<a.port?":"+a.port:"")+a.pathname+(b?"":a.search)},woParams:function(a){a="string"===typeof a?g.parse(a):a;return g.toUrl(a,!0)},woHash:function(a){a="string"===typeof a?g.parse(a):a;return g.toUrl(a)},getRegExpFromInclude:function(a,
b){void 0===b&&(b={});var c="i"+a+!!b.safe+!!b.safeUrls+!!b.tryToFixUrl,d=f.items.regexps.get(c);d||((b.tryToFixUrl||b.safe)&&"*"==a?d="^https?://.*":(d=(b.safeUrls||b.safe)&&"^https?://.*"!=a&&-1!=a.indexOf(".*/")?a.replace(".*/",".tld/"):a,d="^"+h.escapeForRegExpURL(d),d=d.replace(/\*/gi,".*"),d=d.replace(h.escapeForRegExpURL(".tld/"),"."+n+"/"),d=d.replace(/(\^|:\/\/)\.\*/,"$1([^\\?#])*"),d=d.replace(/<1>/g,"([^\\/#\\?]*\\.)?"),d=d.replace(/<2>/g,"[^#\\?]*"),d=d.replace(/<3>/g,"([^\\?#]*\\.)*")),
d="("+d+")",f.items.regexps.set(c,d));return d},getRegExpFromMatch:function(a){var b=f.items.regexps.get(a);if(!b){var c,d,e;c=a.replace(/\$$/,"").split("://");2>c.length?(b="",c=a):(b=c[0].replace(/^\^/,""),c=c.slice(1).join("://"));d=c.split("/");c=2>d.length?"/":"/"+d.slice(1).join("/");e=d[0];"http*"===b?b="https<1>":b.match(/\*|http|https|file|ftp/)||(console.warn('uri: override scheme "'+b+'" with "*"'),b="*");"file"===b?e="":(d=e,e=e.match(/\*$|(\*\.)?[^\/\*]+/),e=(e?e[0]:"").replace(/:[0-9]*$/,
""),e!==d&&console.warn('uri: override host "'+d+'" with "'+e+'"'));c&&"/"===c.substr(0,1)||(console.warn('uri: prefix path "'+c+'" with "/"'),c="/"+c);b=h.escapeForRegExpURL(b).replace(/\*/gi,"[^:\\/#\\?]*");e=h.escapeForRegExpURL(e).replace(/\*\\\./gi,"(*\\.)?").replace(/\*/gi,"[^#\\?\\/]*");c=h.escapeForRegExpURL(c).replace(/\*/gi,".*");b=b.replace(/<1>/g,"?");e=e.replace(RegExp(h.escapeForRegExpURL(".tld")+"$"),"."+n);e+="(:[0-9]{1,5})?";b="(^"+b+h.escapeForRegExpURL("://")+e+c+"$)";f.items.regexps.set(a,
b)}return b},staticVars:{urlAllHttp_:"^https?://.*"}};return g}();Registry.register("uri","58",s)})})();
